# 第1章 计算机网络和因特网

<!-- MarkdownTOC autolink='true' -->

- [1.1 什么是因特网](#11-%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%A0%E7%89%B9%E7%BD%91)
	- [1.1.1 具体构成描述](#111-%E5%85%B7%E4%BD%93%E6%9E%84%E6%88%90%E6%8F%8F%E8%BF%B0)
	- [1.1.2 服务描述](#112-%E6%9C%8D%E5%8A%A1%E6%8F%8F%E8%BF%B0)
	- [1.1.3 协议](#113-%E5%8D%8F%E8%AE%AE)
- [1.2 网络边缘](#12-%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98)
	- [1.2.1 接入网](#121-%E6%8E%A5%E5%85%A5%E7%BD%91)

<!-- /MarkdownTOC -->


## 1.1 什么是因特网

### 1.1.1 具体构成描述

**因特网**是一个互联了遍及全世界的数以亿计的计算设备的网络

这些设备被称为**主机（host）** 或**端系统（end system）**

端系统通过**通信链路（communication link）** 和**分组交换机（packet switch）** 连接在一起

**通信链路：**

- 由不同类型的物理媒体组成：同轴电缆、铜线、光线和无线电频谱
- 不同链路传输速率不同：比特/秒（bit/s，或bps）

**分组交换机：** 从一台端系统到另一台端系统发送的数据会被分段并加上首部字节

作用：从一条入通信链路接收到达的分组，从一条出通信链路转发该分组

两种最著名的分组交换机：

- **路由器（router）：** 通常用于网络核心中
- **链路层交换机（link-layer switch）：** 通常用于接入网

**因特网服务提供商（Internet Service Provider，ISP）：** 每个ISP是一个由多个分组交换机和多端通信链路组成的网络

作用：为端系统提供各种类型的网络接入，DSL、线缆调制解调器、高速局域网接入、无线接入和血慢56kbps拨号调制解调器接入

- 低层的ISP通过国家或国际的高层ISP（Level 3 Communications、AT&T、Sprint和NTT）互连起来
- 高层的ISP由通过高速光纤链路互联的高速路由器组成

**协议（protocal）：** 运行于端系统、分组交换机和其他因特网部件中

协议作用：控制因特网中信息的接受和发送

**因特网工程任务组（Internet Engineering Task Force，IETF）** 的标准文档**请求评论（Request For Comment，RFC）** 定义了TCP、IP、HTTP和SMTP等协议

**IEEE 802**定制了以太网和无线WiFi的标准

### 1.1.2 服务描述

因特网的两种描述方法：

- 根据因特网的硬件和软件组建来描述（1.1.1）
- 根据基础设施像分布式应用程序提供的服务来描述（1.1.2）

**分布式应用程序（distributed application）：** 涉及多台相互交换数据的端系统

- 电子邮件、Web、即时讯息、VoIP、流式视频、分布式游戏、P2P文件共享

**应用程序编程接口（Application Programming Interface）：** 

- 由与因特网相连的端系统提供
- 规定了运行在一个端系统上的软件请求因特网基础设施向运行在另一个端系统上的特定目的地软件交付数据的方式

### 1.1.3 协议

**网络协议：** 定义了在两个或多个通信实体之间交互的报文格式和次序，以及报文发送和/或接收一条报文或其他事件所采取的动作

```
sequenceDiagram
Kevin->>Leo: 你有没有发现
Leo->>Kevin: 是
Client->>Server: TCP连接请求
Server->>Client: TCP连接响应
Kevin->>Leo: 香香的滋味
Leo->>Kevin: 你吃过没
Client->>Server: GET http://xxx.xxx.xxx
Server->>Client: <文件>
```

## 1.2 网络边缘

**端系统**也成为**主机**，是网络最边缘的部分，因为它们容纳（运行）应用程序：Web浏览器、Web服务器等

主机分为两类：

- 客户端（client）：等同于PC、笔记本、手机
- 服务器（server）：等同于更强大的机器、存储发布Web页面、流视频

> 大部分服务器属于大型数据中心，例如Google数据中心，每个数据中心有十万台以上服务器

### 1.2.1 接入网

**接入网（access network）：** 将端系统连接到其边缘路由器（edge router）的物理链路

**1. 家庭接入：DSL、电缆、FTTH、拨号和卫星**

**数字用户线（Digital Subscriber Line，DSL）：** 住户通过电话线获得DSL因特网接入

- 用户的**DSL调制解调器**使用电话线（双绞铜线）与本地中心局（CO）的**数字用户线接入复用器（DSLAM）** 来交换数据
    - 用户的DSL调制解调器得到数字数据后转换为高频音，通过电话线传输给CO
    - CO的DSLAM把多家的模拟信号转换回数字形式

电话线同时承载数据和传统电话信号，编码为不同的频率：

- 高速下行信道，位于50kHz到1MHz频段
- 中速上行信道，位于4kHz到50kHz频段
- 普通的双向电话信道，位于0到4kHz频段

> 用户的分频器把数据信号和电话信号分隔开，把数据信号转发给DSL调制解调器

DSL标准定义带宽（上下行不对称）：

- [ITU 1999]：12Mbps下行，1.8Mbps上行
- [ITU 2003]：24Mbps下行，2.5Mbps上行

> 住宅到CO超过5~10英里不可用DSL接入

**电缆因特网接入（cable Internet access）：** 住户通过有线电视基础设施接入

- 用户的**电缆调制解调器（cable modem）** 通过以太网口连接到家庭PC
- 电缆头端用**电缆调制解调器端接系统（Cable Modem Termination System，CMTS）** 把用户的模拟信号转换成数字形式

DOCSIS 2.0标准定义带宽（上下行不对称）：

- 42.8Mbps下行，30.7Mbps上行

> 电缆因特网**共享广播媒体**，多用户同时用上行或者下行速度会很慢

**光纤到户（Fiber To The Home，FTTH）：** 最简单的光线分布网络——直接光纤，本地中心局设置一根光纤，到相对接近若干家庭的位置，分成每户一根光纤

两种光纤分布体系结构：

- 主动光纤网络（Active Optical Network，AON）
- 被动光纤网络（Passive Optical Network，PON）：就是交换因特网

PON结构：

- 家庭有一个**光纤网络端接器（Optical Network Terminator）** 连接到**分配器（splitter）** 
- **分配器（splitter）** 把100个以下的家庭集结到一根共享光纤，该光纤连接到中心局的**光纤线路端接器（Optical Line Terminator，OLT）** OLT提供了光信号和电信号之间的转换

**2. 企业或家庭接入：以太网和WiFi**

**以太网：** 目前最流行的局域网（LAN）技术，把端用户连接到边缘路由器

- 以太网用户（100Mbps）用双绞铜线与一台以太网交换机相连

**局域无线接入：WiFi（基于IEEE 802.11）**

无线LAN用户必须位于接入点的几十米范围内

**3. 广域无线接入：3G，4G和LTE**

通过蜂窝网提供商运营的基站来发送和接受分组。

与WiFi不同的是，用户需要位于基站数万米的范围内

3G为分组交换广域无线因特网提供了超过1 Mbps的速率